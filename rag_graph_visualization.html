<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG Memory Graph - Interactive Visualization</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #0d1117;
            color: #c9d1d9;
            overflow: hidden;
        }

        #graph-container {
            width: 100vw;
            height: 100vh;
            position: relative;
        }

        .controls {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(22, 27, 34, 0.95);
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
            z-index: 1000;
            max-width: 300px;
            backdrop-filter: blur(10px);
        }

        .controls h2 {
            font-size: 18px;
            margin-bottom: 15px;
            color: #58a6ff;
        }

        .stat {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #21262d;
        }

        .stat:last-child {
            border-bottom: none;
        }

        .stat-label {
            color: #8b949e;
            font-size: 13px;
        }

        .stat-value {
            color: #c9d1d9;
            font-weight: 600;
            font-size: 13px;
        }

        .legend {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(22, 27, 34, 0.95);
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 15px;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .legend h3 {
            font-size: 14px;
            margin-bottom: 10px;
            color: #58a6ff;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
            font-size: 12px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .info-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(22, 27, 34, 0.95);
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
            z-index: 1000;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            backdrop-filter: blur(10px);
            display: none;
        }

        .info-panel.visible {
            display: block;
        }

        .info-panel h3 {
            color: #58a6ff;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .info-panel .memory-text {
            color: #c9d1d9;
            line-height: 1.6;
            margin-bottom: 15px;
            padding: 10px;
            background: #161b22;
            border-radius: 4px;
        }

        .info-panel .memory-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }

        .info-panel .tag {
            background: #1f6feb;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }

        .info-panel .connections {
            margin-top: 15px;
        }

        .info-panel .connection-item {
            padding: 8px;
            margin: 5px 0;
            background: #161b22;
            border-radius: 4px;
            font-size: 12px;
            border-left: 3px solid #58a6ff;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: #8b949e;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            line-height: 24px;
        }

        .close-btn:hover {
            color: #c9d1d9;
        }

        .instructions {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(22, 27, 34, 0.95);
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 15px;
            z-index: 1000;
            font-size: 12px;
            color: #8b949e;
            backdrop-filter: blur(10px);
        }

        .instructions div {
            margin: 5px 0;
        }

        .node {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .node:hover {
            stroke-width: 3px;
        }

        .node.selected {
            stroke: #58a6ff;
            stroke-width: 4px;
        }

        .link {
            stroke: #30363d;
            stroke-opacity: 0.6;
            transition: all 0.3s ease;
        }

        .link.highlighted {
            stroke: #58a6ff;
            stroke-opacity: 1;
            stroke-width: 2px;
        }

        .node-label {
            font-size: 10px;
            fill: #8b949e;
            pointer-events: none;
            text-anchor: middle;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #161b22;
        }

        ::-webkit-scrollbar-thumb {
            background: #30363d;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #484f58;
        }
    </style>
</head>
<body>
    <div id="graph-container">
        <svg id="graph"></svg>
        
        <div class="controls">
            <h2>üìä Graph Statistics</h2>
            <div class="stat">
                <span class="stat-label">Total Nodes</span>
                <span class="stat-value">87</span>
            </div>
            <div class="stat">
                <span class="stat-label">Total Edges</span>
                <span class="stat-value">564</span>
            </div>
            <div class="stat">
                <span class="stat-label">Components</span>
                <span class="stat-value">1</span>
            </div>
            <div class="stat">
                <span class="stat-label">Avg Degree</span>
                <span class="stat-value">6.48</span>
            </div>
            <div class="stat">
                <span class="stat-label">Density</span>
                <span class="stat-value">0.0754</span>
            </div>
        </div>

        <div class="legend">
            <h3>üé® Categories</h3>
            <div id="legend-items"></div>
        </div>

        <div class="info-panel" id="info-panel">
            <button class="close-btn" onclick="closeInfoPanel()">√ó</button>
            <div id="info-content"></div>
        </div>

        <div class="instructions">
            <div><strong>üñ±Ô∏è Controls:</strong></div>
            <div>‚Ä¢ Click node to view details</div>
            <div>‚Ä¢ Drag nodes to reposition</div>
            <div>‚Ä¢ Scroll to zoom in/out</div>
            <div>‚Ä¢ Drag background to pan</div>
        </div>
    </div>

    <script>
        // Graph data
        const graphData = {
        "nodes": [
                {
                        "id": 1,
                        "label": "Python is a high-level, interpreted programming language known for its simplicit...",
                        "category": "programming"
                },
                {
                        "id": 2,
                        "label": "JavaScript is the language of the web, running in browsers and servers via Node....",
                        "category": "programming"
                },
                {
                        "id": 3,
                        "label": "TypeScript adds static typing to JavaScript, making code more maintainable and s...",
                        "category": "programming"
                },
                {
                        "id": 4,
                        "label": "Rust provides memory safety without garbage collection through ownership. Create...",
                        "category": "programming"
                },
                {
                        "id": 5,
                        "label": "Go is designed for concurrent programming and scalability at Google. Created by ...",
                        "category": "programming"
                },
                {
                        "id": 6,
                        "label": "Java is a class-based, object-oriented language that runs on the JVM. Developed ...",
                        "category": "programming"
                },
                {
                        "id": 7,
                        "label": "C++ is a powerful systems programming language with manual memory management. Cr...",
                        "category": "programming"
                },
                {
                        "id": 8,
                        "label": "Swift is Apple's modern language for iOS and macOS development. Introduced by Ap...",
                        "category": "programming"
                },
                {
                        "id": 9,
                        "label": "Kotlin is a modern language for Android development, interoperable with Java. De...",
                        "category": "programming"
                },
                {
                        "id": 10,
                        "label": "Ruby is known for its elegant syntax and the Rails web framework. Created by Yuk...",
                        "category": "programming"
                },
                {
                        "id": 11,
                        "label": "C# is a modern, object-oriented programming language developed by Microsoft. Cre...",
                        "category": "programming"
                },
                {
                        "id": 12,
                        "label": "PHP is a popular server-side scripting language designed for web development. Cr...",
                        "category": "programming"
                },
                {
                        "id": 13,
                        "label": "Machine learning is a subset of AI that learns patterns from data without being ...",
                        "category": "ai"
                },
                {
                        "id": 14,
                        "label": "Deep learning uses neural networks with multiple layers for complex tasks. These...",
                        "category": "ai"
                },
                {
                        "id": 15,
                        "label": "Neural networks are inspired by biological neurons in the human brain. Just as b...",
                        "category": "ai"
                },
                {
                        "id": 16,
                        "label": "Transformers revolutionized NLP with attention mechanisms. Introduced in the pap...",
                        "category": "ai"
                },
                {
                        "id": 17,
                        "label": "GPT models use transformer architecture for text generation. GPT stands for Gene...",
                        "category": "ai"
                },
                {
                        "id": 18,
                        "label": "BERT is a bidirectional transformer model for understanding context. Introduced ...",
                        "category": "ai"
                },
                {
                        "id": 19,
                        "label": "Convolutional Neural Networks (CNNs) excel at image recognition. CNNs use convol...",
                        "category": "ai"
                },
                {
                        "id": 20,
                        "label": "Recurrent Neural Networks (RNNs) process sequential data like text. Unlike feedf...",
                        "category": "ai"
                },
                {
                        "id": 21,
                        "label": "Reinforcement learning trains agents through rewards and penalties. In reinforce...",
                        "category": "ai"
                },
                {
                        "id": 22,
                        "label": "Transfer learning reuses pre-trained models for new tasks. Instead of training m...",
                        "category": "ai"
                },
                {
                        "id": 23,
                        "label": "Embeddings represent words or concepts as dense vectors. Unlike sparse one-hot e...",
                        "category": "ai"
                },
                {
                        "id": 24,
                        "label": "Vector databases enable fast similarity search for embeddings. Traditional datab...",
                        "category": "ai"
                },
                {
                        "id": 25,
                        "label": "RAG combines retrieval and generation for better AI responses. RAG, or Retrieval...",
                        "category": "ai"
                },
                {
                        "id": 26,
                        "label": "Fine-tuning adapts pre-trained models to specific domains. While pre-trained mod...",
                        "category": "ai"
                },
                {
                        "id": 27,
                        "label": "Prompt engineering optimizes inputs for language models. The way prompts are str...",
                        "category": "ai"
                },
                {
                        "id": 28,
                        "label": "PostgreSQL is a powerful open-source relational database with ACID compliance. D...",
                        "category": "databases"
                },
                {
                        "id": 29,
                        "label": "MySQL is a popular open-source relational database management system. Originally...",
                        "category": "databases"
                },
                {
                        "id": 30,
                        "label": "MongoDB is a document-oriented NoSQL database for flexible schemas. Instead of s...",
                        "category": "databases"
                },
                {
                        "id": 31,
                        "label": "Redis is an in-memory data structure store used for caching. Created by Salvator...",
                        "category": "databases"
                },
                {
                        "id": 32,
                        "label": "Elasticsearch is a distributed search and analytics engine. Built on Apache Luce...",
                        "category": "databases"
                },
                {
                        "id": 33,
                        "label": "SQLite is a lightweight embedded database for local storage. Unlike most SQL dat...",
                        "category": "databases"
                },
                {
                        "id": 34,
                        "label": "Cassandra is a distributed NoSQL database for high availability. Developed at Fa...",
                        "category": "databases"
                },
                {
                        "id": 35,
                        "label": "DynamoDB is AWS's managed NoSQL database service. As a fully managed service, Dy...",
                        "category": "databases"
                },
                {
                        "id": 36,
                        "label": "Neo4j is a graph database for connected data relationships. Unlike relational da...",
                        "category": "databases"
                },
                {
                        "id": 37,
                        "label": "Vector databases like pgvector enable semantic search. Traditional databases are...",
                        "category": "databases"
                },
                {
                        "id": 38,
                        "label": "InfluxDB is a time-series database optimized for handling time-stamped data. Des...",
                        "category": "databases"
                },
                {
                        "id": 39,
                        "label": "CouchDB is a document-oriented NoSQL database with a focus on ease of use and sc...",
                        "category": "databases"
                },
                {
                        "id": 40,
                        "label": "React is a JavaScript library for building user interfaces, developed by Faceboo...",
                        "category": "webdev"
                },
                {
                        "id": 41,
                        "label": "Vue.js is a progressive framework for building web applications, created by Evan...",
                        "category": "webdev"
                },
                {
                        "id": 42,
                        "label": "Angular is a comprehensive framework by Google for web apps, providing a complet...",
                        "category": "webdev"
                },
                {
                        "id": 43,
                        "label": "Next.js is a React framework with server-side rendering and static site generati...",
                        "category": "webdev"
                },
                {
                        "id": 44,
                        "label": "Svelte compiles components to efficient vanilla JavaScript, resulting in smaller...",
                        "category": "webdev"
                },
                {
                        "id": 45,
                        "label": "Tailwind CSS is a utility-first CSS framework that provides low-level utility cl...",
                        "category": "webdev"
                },
                {
                        "id": 46,
                        "label": "GraphQL is a query language for APIs with precise data fetching, developed by Fa...",
                        "category": "webdev"
                },
                {
                        "id": 47,
                        "label": "REST APIs use HTTP methods for CRUD operations, providing a standard way to inte...",
                        "category": "webdev"
                },
                {
                        "id": 48,
                        "label": "WebSockets enable real-time bidirectional communication between clients and serv...",
                        "category": "webdev"
                },
                {
                        "id": 49,
                        "label": "Progressive Web Apps (PWAs) work offline and feel native, combining the best of ...",
                        "category": "webdev"
                },
                {
                        "id": 50,
                        "label": "Server-Side Rendering (SSR) generates HTML on the server for each request, impro...",
                        "category": "webdev"
                },
                {
                        "id": 51,
                        "label": "Web Components are a set of web platform APIs that allow you to create reusable ...",
                        "category": "webdev"
                },
                {
                        "id": 52,
                        "label": "Docker containers package applications with their dependencies, providing consis...",
                        "category": "devops"
                },
                {
                        "id": 53,
                        "label": "Kubernetes orchestrates containerized applications at scale, automating deployme...",
                        "category": "devops"
                },
                {
                        "id": 54,
                        "label": "CI/CD pipelines automate testing and deployment processes, enabling rapid and re...",
                        "category": "devops"
                },
                {
                        "id": 55,
                        "label": "GitHub Actions provides CI/CD integrated with Git repositories, enabling automat...",
                        "category": "devops"
                },
                {
                        "id": 56,
                        "label": "Terraform enables infrastructure as code for cloud resources, allowing you to de...",
                        "category": "devops"
                },
                {
                        "id": 57,
                        "label": "Ansible automates configuration management and deployment, using simple YAML pla...",
                        "category": "devops"
                },
                {
                        "id": 58,
                        "label": "Prometheus monitors systems and collects metrics, providing a time-series databa...",
                        "category": "devops"
                },
                {
                        "id": 59,
                        "label": "Grafana visualizes metrics and creates dashboards, providing a powerful platform...",
                        "category": "devops"
                },
                {
                        "id": 60,
                        "label": "Load balancers distribute traffic across multiple servers, ensuring high availab...",
                        "category": "devops"
                },
                {
                        "id": 61,
                        "label": "Microservices architecture splits applications into small services, each running...",
                        "category": "devops"
                },
                {
                        "id": 62,
                        "label": "Infrastructure as Code (IaC) manages infrastructure through code rather than man...",
                        "category": "devops"
                },
                {
                        "id": 63,
                        "label": "Container orchestration manages containerized applications across clusters of ma...",
                        "category": "devops"
                },
                {
                        "id": 64,
                        "label": "Pandas is a Python library for data manipulation and analysis, providing data st...",
                        "category": "datascience"
                },
                {
                        "id": 65,
                        "label": "NumPy provides support for large multi-dimensional arrays and matrices, along wi...",
                        "category": "datascience"
                },
                {
                        "id": 66,
                        "label": "Matplotlib creates static, animated, and interactive visualizations, providing a...",
                        "category": "datascience"
                },
                {
                        "id": 67,
                        "label": "Scikit-learn offers machine learning algorithms for Python, providing a unified ...",
                        "category": "datascience"
                },
                {
                        "id": 68,
                        "label": "Jupyter notebooks enable interactive data analysis, combining code, text, and vi...",
                        "category": "datascience"
                },
                {
                        "id": 69,
                        "label": "Data cleaning prepares raw data for analysis, addressing issues like missing val...",
                        "category": "datascience"
                },
                {
                        "id": 70,
                        "label": "Feature engineering creates informative input variables for machine learning mod...",
                        "category": "datascience"
                },
                {
                        "id": 71,
                        "label": "Cross-validation evaluates model performance reliably by splitting data into mul...",
                        "category": "datascience"
                },
                {
                        "id": 72,
                        "label": "A/B testing compares two versions to determine which performs better, using stat...",
                        "category": "datascience"
                },
                {
                        "id": 73,
                        "label": "Statistical significance determines if results are meaningful, helping distingui...",
                        "category": "datascience"
                },
                {
                        "id": 74,
                        "label": "Exploratory Data Analysis (EDA) investigates data to discover patterns, anomalie...",
                        "category": "datascience"
                },
                {
                        "id": 75,
                        "label": "Time series analysis examines data points collected over time to identify patter...",
                        "category": "datascience"
                },
                {
                        "id": 76,
                        "label": "Encryption protects data by converting it into unreadable format, ensuring that ...",
                        "category": "security"
                },
                {
                        "id": 77,
                        "label": "HTTPS secures web communication with SSL/TLS certificates, encrypting data betwe...",
                        "category": "security"
                },
                {
                        "id": 78,
                        "label": "OAuth 2.0 is an authorization framework for secure API access, allowing users to...",
                        "category": "security"
                },
                {
                        "id": 79,
                        "label": "JWT tokens authenticate users in stateless applications, providing a compact way...",
                        "category": "security"
                },
                {
                        "id": 80,
                        "label": "SQL injection attacks exploit database vulnerabilities by injecting malicious SQ...",
                        "category": "security"
                },
                {
                        "id": 81,
                        "label": "Cross-Site Scripting (XSS) injects malicious scripts into web pages viewed by ot...",
                        "category": "security"
                },
                {
                        "id": 82,
                        "label": "CSRF attacks trick users into unwanted actions by exploiting the trust that site...",
                        "category": "security"
                },
                {
                        "id": 83,
                        "label": "Password hashing uses algorithms like bcrypt for security, storing password repr...",
                        "category": "security"
                },
                {
                        "id": 84,
                        "label": "Two-factor authentication adds extra security layer by requiring something you k...",
                        "category": "security"
                },
                {
                        "id": 85,
                        "label": "Zero-trust security assumes no implicit trust, requiring verification for every ...",
                        "category": "security"
                },
                {
                        "id": 86,
                        "label": "Security headers protect web applications by instructing browsers to enforce sec...",
                        "category": "security"
                },
                {
                        "id": 87,
                        "label": "Vulnerability management identifies, assesses, and remediates security weaknesse...",
                        "category": "security"
                }
        ],
        "edges": [
                {
                        "source": 37,
                        "target": 24,
                        "weight": 0.9263366963626471
                },
                {
                        "source": 63,
                        "target": 53,
                        "weight": 0.8603744539569758
                },
                {
                        "source": 81,
                        "target": 82,
                        "weight": 0.8513652898526758
                },
                {
                        "source": 26,
                        "target": 22,
                        "weight": 0.847392711279455
                },
                {
                        "source": 7,
                        "target": 11,
                        "weight": 0.8471540260170356
                },
                {
                        "source": 14,
                        "target": 20,
                        "weight": 0.8470975273888347
                },
                {
                        "source": 30,
                        "target": 39,
                        "weight": 0.8342506636651026
                },
                {
                        "source": 43,
                        "target": 50,
                        "weight": 0.833270136266788
                },
                {
                        "source": 62,
                        "target": 56,
                        "weight": 0.8294770274101881
                },
                {
                        "source": 41,
                        "target": 42,
                        "weight": 0.8289288758628688
                },
                {
                        "source": 22,
                        "target": 14,
                        "weight": 0.82697298589181
                },
                {
                        "source": 86,
                        "target": 81,
                        "weight": 0.8259291744593673
                },
                {
                        "source": 37,
                        "target": 25,
                        "weight": 0.8241939258989732
                },
                {
                        "source": 41,
                        "target": 44,
                        "weight": 0.8219402419322522
                },
                {
                        "source": 16,
                        "target": 18,
                        "weight": 0.8216353115708268
                },
                {
                        "source": 7,
                        "target": 8,
                        "weight": 0.814995388844471
                },
                {
                        "source": 18,
                        "target": 22,
                        "weight": 0.8143633255387865
                },
                {
                        "source": 81,
                        "target": 80,
                        "weight": 0.8131275452854344
                },
                {
                        "source": 16,
                        "target": 17,
                        "weight": 0.8127686822287705
                },
                {
                        "source": 66,
                        "target": 64,
                        "weight": 0.8087908551714207
                },
                {
                        "source": 82,
                        "target": 86,
                        "weight": 0.8075889369763725
                },
                {
                        "source": 19,
                        "target": 14,
                        "weight": 0.8068124142598683
                },
                {
                        "source": 6,
                        "target": 9,
                        "weight": 0.8060693771985974
                },
                {
                        "source": 65,
                        "target": 64,
                        "weight": 0.8055549802085725
                },
                {
                        "source": 15,
                        "target": 14,
                        "weight": 0.8034956990717128
                },
                {
                        "source": 72,
                        "target": 73,
                        "weight": 0.8014995107643521
                },
                {
                        "source": 22,
                        "target": 16,
                        "weight": 0.8002796358465109
                },
                {
                        "source": 3,
                        "target": 2,
                        "weight": 0.7981524716585209
                },
                {
                        "source": 12,
                        "target": 1,
                        "weight": 0.7972511907256505
                },
                {
                        "source": 35,
                        "target": 30,
                        "weight": 0.7927201012322631
                },
                {
                        "source": 40,
                        "target": 41,
                        "weight": 0.7907306443860113
                },
                {
                        "source": 8,
                        "target": 11,
                        "weight": 0.7886967040725944
                },
                {
                        "source": 8,
                        "target": 5,
                        "weight": 0.7874604010230029
                },
                {
                        "source": 76,
                        "target": 77,
                        "weight": 0.7873024076398856
                },
                {
                        "source": 29,
                        "target": 28,
                        "weight": 0.7857654303516729
                },
                {
                        "source": 51,
                        "target": 45,
                        "weight": 0.7852290556140962
                },
                {
                        "source": 27,
                        "target": 17,
                        "weight": 0.7832083030199719
                },
                {
                        "source": 41,
                        "target": 43,
                        "weight": 0.7830112815884915
                },
                {
                        "source": 69,
                        "target": 64,
                        "weight": 0.7825320840909211
                },
                {
                        "source": 7,
                        "target": 6,
                        "weight": 0.7811104787249333
                },
                {
                        "source": 39,
                        "target": 35,
                        "weight": 0.7802276799259347
                },
                {
                        "source": 12,
                        "target": 6,
                        "weight": 0.7793624561204723
                },
                {
                        "source": 86,
                        "target": 77,
                        "weight": 0.7787303634726372
                },
                {
                        "source": 26,
                        "target": 14,
                        "weight": 0.7786820263337737
                },
                {
                        "source": 59,
                        "target": 38,
                        "weight": 0.7785574935055125
                },
                {
                        "source": 78,
                        "target": 79,
                        "weight": 0.7781250389678895
                },
                {
                        "source": 11,
                        "target": 6,
                        "weight": 0.7774368402917187
                },
                {
                        "source": 4,
                        "target": 8,
                        "weight": 0.7771748624182727
                },
                {
                        "source": 37,
                        "target": 28,
                        "weight": 0.776606081327947
                },
                {
                        "source": 29,
                        "target": 34,
                        "weight": 0.775726319555178
                },
                {
                        "source": 43,
                        "target": 40,
                        "weight": 0.7743217815365986
                },
                {
                        "source": 12,
                        "target": 2,
                        "weight": 0.7741980672972479
                },
                {
                        "source": 6,
                        "target": 1,
                        "weight": 0.7736274927810409
                },
                {
                        "source": 65,
                        "target": 66,
                        "weight": 0.7735955876813756
                },
                {
                        "source": 69,
                        "target": 70,
                        "weight": 0.7733137841095971
                },
                {
                        "source": 6,
                        "target": 2,
                        "weight": 0.7726574292621906
                },
                {
                        "source": 77,
                        "target": 48,
                        "weight": 0.7724189491516463
                },
                {
                        "source": 17,
                        "target": 26,
                        "weight": 0.772380424280838
                },
                {
                        "source": 8,
                        "target": 9,
                        "weight": 0.7722949230567419
                },
                {
                        "source": 35,
                        "target": 31,
                        "weight": 0.7713397280533594
                },
                {
                        "source": 11,
                        "target": 3,
                        "weight": 0.7704768711474412
                },
                {
                        "source": 52,
                        "target": 53,
                        "weight": 0.7686884859566492
                },
                {
                        "source": 40,
                        "target": 2,
                        "weight": 0.7681242124778798
                },
                {
                        "source": 24,
                        "target": 25,
                        "weight": 0.7670321177986745
                },
                {
                        "source": 82,
                        "target": 80,
                        "weight": 0.7663346570350458
                },
                {
                        "source": 32,
                        "target": 38,
                        "weight": 0.764446133821966
                },
                {
                        "source": 42,
                        "target": 3,
                        "weight": 0.7643576635324092
                },
                {
                        "source": 45,
                        "target": 43,
                        "weight": 0.7637992758720731
                },
                {
                        "source": 67,
                        "target": 64,
                        "weight": 0.7631969441468396
                },
                {
                        "source": 66,
                        "target": 68,
                        "weight": 0.7628872944500831
                },
                {
                        "source": 67,
                        "target": 13,
                        "weight": 0.7625081575531908
                },
                {
                        "source": 13,
                        "target": 14,
                        "weight": 0.7623424661188927
                },
                {
                        "source": 11,
                        "target": 12,
                        "weight": 0.7618566685627777
                },
                {
                        "source": 7,
                        "target": 9,
                        "weight": 0.7615875849755286
                },
                {
                        "source": 9,
                        "target": 5,
                        "weight": 0.7613826184046767
                },
                {
                        "source": 23,
                        "target": 18,
                        "weight": 0.7598573529787677
                },
                {
                        "source": 70,
                        "target": 74,
                        "weight": 0.7597343867689602
                },
                {
                        "source": 12,
                        "target": 7,
                        "weight": 0.759522168328097
                },
                {
                        "source": 2,
                        "target": 43,
                        "weight": 0.7593616991937371
                },
                {
                        "source": 46,
                        "target": 47,
                        "weight": 0.758898377351325
                },
                {
                        "source": 29,
                        "target": 33,
                        "weight": 0.7588462269589374
                },
                {
                        "source": 2,
                        "target": 51,
                        "weight": 0.7585103675720619
                },
                {
                        "source": 39,
                        "target": 31,
                        "weight": 0.7583471148233976
                },
                {
                        "source": 10,
                        "target": 12,
                        "weight": 0.7577238896314353
                },
                {
                        "source": 7,
                        "target": 1,
                        "weight": 0.7577150797835663
                },
                {
                        "source": 61,
                        "target": 47,
                        "weight": 0.7566295661337685
                },
                {
                        "source": 9,
                        "target": 11,
                        "weight": 0.7559385919541235
                },
                {
                        "source": 70,
                        "target": 22,
                        "weight": 0.7556542410339407
                },
                {
                        "source": 27,
                        "target": 70,
                        "weight": 0.7549773485094108
                },
                {
                        "source": 11,
                        "target": 1,
                        "weight": 0.7549178574514845
                },
                {
                        "source": 4,
                        "target": 5,
                        "weight": 0.7549030265997771
                },
                {
                        "source": 6,
                        "target": 8,
                        "weight": 0.7547538529871547
                },
                {
                        "source": 8,
                        "target": 1,
                        "weight": 0.7537453505428151
                },
                {
                        "source": 70,
                        "target": 13,
                        "weight": 0.7528917485486428
                },
                {
                        "source": 48,
                        "target": 51,
                        "weight": 0.7522036336044409
                },
                {
                        "source": 30,
                        "target": 31,
                        "weight": 0.7521405168230724
                },
                {
                        "source": 63,
                        "target": 61,
                        "weight": 0.7520591902198536
                },
                {
                        "source": 42,
                        "target": 40,
                        "weight": 0.7514833793750855
                },
                {
                        "source": 86,
                        "target": 83,
                        "weight": 0.7509960199105099
                },
                {
                        "source": 8,
                        "target": 3,
                        "weight": 0.7500116075335062
                },
                {
                        "source": 74,
                        "target": 69,
                        "weight": 0.7497929172292623
                },
                {
                        "source": 76,
                        "target": 83,
                        "weight": 0.7494080949828915
                },
                {
                        "source": 16,
                        "target": 14,
                        "weight": 0.7493010276903065
                },
                {
                        "source": 16,
                        "target": 23,
                        "weight": 0.7492726561278591
                },
                {
                        "source": 1,
                        "target": 68,
                        "weight": 0.7492472880146209
                },
                {
                        "source": 29,
                        "target": 12,
                        "weight": 0.7492396802197603
                },
                {
                        "source": 22,
                        "target": 13,
                        "weight": 0.7492043791664462
                },
                {
                        "source": 3,
                        "target": 51,
                        "weight": 0.7489387343788136
                },
                {
                        "source": 32,
                        "target": 59,
                        "weight": 0.7478933028134673
                },
                {
                        "source": 82,
                        "target": 50,
                        "weight": 0.7472014247036076
                },
                {
                        "source": 7,
                        "target": 5,
                        "weight": 0.7468175808323975
                },
                {
                        "source": 23,
                        "target": 22,
                        "weight": 0.7467603155298015
                },
                {
                        "source": 44,
                        "target": 3,
                        "weight": 0.7467326901942457
                },
                {
                        "source": 42,
                        "target": 43,
                        "weight": 0.7464554841404245
                },
                {
                        "source": 51,
                        "target": 43,
                        "weight": 0.7463078051744417
                },
                {
                        "source": 22,
                        "target": 15,
                        "weight": 0.7455936155014284
                },
                {
                        "source": 5,
                        "target": 6,
                        "weight": 0.7450896855634503
                },
                {
                        "source": 17,
                        "target": 20,
                        "weight": 0.7436847191475975
                },
                {
                        "source": 8,
                        "target": 10,
                        "weight": 0.7436104316298398
                },
                {
                        "source": 63,
                        "target": 52,
                        "weight": 0.7434425103328005
                },
                {
                        "source": 78,
                        "target": 84,
                        "weight": 0.7433859517259435
                },
                {
                        "source": 76,
                        "target": 84,
                        "weight": 0.743372737145638
                },
                {
                        "source": 38,
                        "target": 33,
                        "weight": 0.74304236783663
                },
                {
                        "source": 65,
                        "target": 67,
                        "weight": 0.7429653148493888
                },
                {
                        "source": 18,
                        "target": 26,
                        "weight": 0.7429078601896415
                },
                {
                        "source": 3,
                        "target": 6,
                        "weight": 0.7428915058212763
                },
                {
                        "source": 1,
                        "target": 10,
                        "weight": 0.7425268664172378
                },
                {
                        "source": 16,
                        "target": 19,
                        "weight": 0.7420624391231632
                },
                {
                        "source": 25,
                        "target": 17,
                        "weight": 0.7419042031190523
                },
                {
                        "source": 51,
                        "target": 42,
                        "weight": 0.741593356679104
                },
                {
                        "source": 51,
                        "target": 49,
                        "weight": 0.7408434572183723
                },
                {
                        "source": 5,
                        "target": 1,
                        "weight": 0.7406226848603419
                },
                {
                        "source": 48,
                        "target": 47,
                        "weight": 0.7395168356809809
                },
                {
                        "source": 3,
                        "target": 7,
                        "weight": 0.7395091181637155
                },
                {
                        "source": 12,
                        "target": 8,
                        "weight": 0.73947722663428
                },
                {
                        "source": 4,
                        "target": 10,
                        "weight": 0.739468527777637
                },
                {
                        "source": 21,
                        "target": 13,
                        "weight": 0.739387439652519
                },
                {
                        "source": 11,
                        "target": 10,
                        "weight": 0.7391170849518944
                },
                {
                        "source": 80,
                        "target": 83,
                        "weight": 0.7390257749748066
                },
                {
                        "source": 57,
                        "target": 56,
                        "weight": 0.7389549139401064
                },
                {
                        "source": 86,
                        "target": 50,
                        "weight": 0.7380565189730051
                },
                {
                        "source": 84,
                        "target": 79,
                        "weight": 0.7378837433132739
                },
                {
                        "source": 4,
                        "target": 9,
                        "weight": 0.7378349627163447
                },
                {
                        "source": 32,
                        "target": 46,
                        "weight": 0.7376796418342991
                },
                {
                        "source": 6,
                        "target": 10,
                        "weight": 0.7373536600944315
                },
                {
                        "source": 50,
                        "target": 81,
                        "weight": 0.737097684058941
                },
                {
                        "source": 50,
                        "target": 40,
                        "weight": 0.7368169191579061
                },
                {
                        "source": 11,
                        "target": 2,
                        "weight": 0.7365360456898927
                },
                {
                        "source": 64,
                        "target": 75,
                        "weight": 0.7356933424493439
                },
                {
                        "source": 84,
                        "target": 83,
                        "weight": 0.7352743017105376
                },
                {
                        "source": 30,
                        "target": 46,
                        "weight": 0.7350829990478748
                },
                {
                        "source": 1,
                        "target": 64,
                        "weight": 0.7341785046362157
                },
                {
                        "source": 13,
                        "target": 69,
                        "weight": 0.73411954632357
                },
                {
                        "source": 10,
                        "target": 43,
                        "weight": 0.7337085543646356
                },
                {
                        "source": 71,
                        "target": 13,
                        "weight": 0.7333197910819296
                },
                {
                        "source": 82,
                        "target": 79,
                        "weight": 0.7331933845750023
                },
                {
                        "source": 46,
                        "target": 28,
                        "weight": 0.7330908368771528
                },
                {
                        "source": 12,
                        "target": 28,
                        "weight": 0.7324860540648422
                },
                {
                        "source": 41,
                        "target": 50,
                        "weight": 0.7322463974427968
                },
                {
                        "source": 66,
                        "target": 59,
                        "weight": 0.7321768038530023
                },
                {
                        "source": 2,
                        "target": 9,
                        "weight": 0.7306477149748771
                },
                {
                        "source": 67,
                        "target": 66,
                        "weight": 0.7303934231858114
                },
                {
                        "source": 67,
                        "target": 1,
                        "weight": 0.7303405549196672
                },
                {
                        "source": 45,
                        "target": 3,
                        "weight": 0.7300960619321919
                },
                {
                        "source": 75,
                        "target": 71,
                        "weight": 0.7297544957384643
                },
                {
                        "source": 80,
                        "target": 87,
                        "weight": 0.729495595129084
                },
                {
                        "source": 28,
                        "target": 34,
                        "weight": 0.7293280190896182
                },
                {
                        "source": 9,
                        "target": 12,
                        "weight": 0.729092437074932
                },
                {
                        "source": 13,
                        "target": 15,
                        "weight": 0.7286656350151791
                },
                {
                        "source": 67,
                        "target": 71,
                        "weight": 0.7285864214811187
                },
                {
                        "source": 80,
                        "target": 86,
                        "weight": 0.7278525587722879
                },
                {
                        "source": 77,
                        "target": 82,
                        "weight": 0.727826163510151
                },
                {
                        "source": 48,
                        "target": 79,
                        "weight": 0.7275329623095557
                },
                {
                        "source": 7,
                        "target": 10,
                        "weight": 0.7275178845958732
                },
                {
                        "source": 65,
                        "target": 1,
                        "weight": 0.7274499819083036
                },
                {
                        "source": 70,
                        "target": 75,
                        "weight": 0.7271164670052155
                },
                {
                        "source": 2,
                        "target": 10,
                        "weight": 0.7263216605095774
                },
                {
                        "source": 64,
                        "target": 28,
                        "weight": 0.7260857449712549
                },
                {
                        "source": 70,
                        "target": 26,
                        "weight": 0.7252970884844175
                },
                {
                        "source": 7,
                        "target": 2,
                        "weight": 0.7252476013946665
                },
                {
                        "source": 38,
                        "target": 29,
                        "weight": 0.7250829083800773
                },
                {
                        "source": 4,
                        "target": 7,
                        "weight": 0.7250509328158441
                },
                {
                        "source": 23,
                        "target": 70,
                        "weight": 0.7248912375510989
                },
                {
                        "source": 13,
                        "target": 19,
                        "weight": 0.7247697353741376
                },
                {
                        "source": 23,
                        "target": 24,
                        "weight": 0.7247689921350694
                },
                {
                        "source": 64,
                        "target": 36,
                        "weight": 0.7242693850794328
                },
                {
                        "source": 47,
                        "target": 79,
                        "weight": 0.7240764403018699
                },
                {
                        "source": 5,
                        "target": 11,
                        "weight": 0.7230675075963608
                },
                {
                        "source": 71,
                        "target": 26,
                        "weight": 0.7229690604628135
                },
                {
                        "source": 86,
                        "target": 76,
                        "weight": 0.7228893097111075
                },
                {
                        "source": 64,
                        "target": 68,
                        "weight": 0.7227538808547476
                },
                {
                        "source": 9,
                        "target": 68,
                        "weight": 0.7226690527739511
                },
                {
                        "source": 47,
                        "target": 78,
                        "weight": 0.7226398362363432
                },
                {
                        "source": 31,
                        "target": 48,
                        "weight": 0.7218939141795873
                },
                {
                        "source": 28,
                        "target": 24,
                        "weight": 0.7214588738206298
                },
                {
                        "source": 79,
                        "target": 77,
                        "weight": 0.7213087607616604
                },
                {
                        "source": 59,
                        "target": 46,
                        "weight": 0.7208193791957362
                },
                {
                        "source": 86,
                        "target": 60,
                        "weight": 0.7208192889559419
                },
                {
                        "source": 69,
                        "target": 67,
                        "weight": 0.7204865633442702
                },
                {
                        "source": 77,
                        "target": 84,
                        "weight": 0.7204792665100493
                },
                {
                        "source": 78,
                        "target": 82,
                        "weight": 0.7203318987167415
                },
                {
                        "source": 48,
                        "target": 2,
                        "weight": 0.7203147401130947
                },
                {
                        "source": 1,
                        "target": 2,
                        "weight": 0.7197640980016025
                },
                {
                        "source": 66,
                        "target": 1,
                        "weight": 0.7196072761014598
                },
                {
                        "source": 9,
                        "target": 3,
                        "weight": 0.7194492460433579
                },
                {
                        "source": 69,
                        "target": 22,
                        "weight": 0.7185113188478103
                },
                {
                        "source": 51,
                        "target": 81,
                        "weight": 0.7176346885762983
                },
                {
                        "source": 12,
                        "target": 3,
                        "weight": 0.7173200538395779
                },
                {
                        "source": 81,
                        "target": 87,
                        "weight": 0.7171567191687527
                },
                {
                        "source": 30,
                        "target": 58,
                        "weight": 0.7171127419733718
                },
                {
                        "source": 29,
                        "target": 46,
                        "weight": 0.7169279554398174
                },
                {
                        "source": 82,
                        "target": 47,
                        "weight": 0.7167645699531443
                },
                {
                        "source": 67,
                        "target": 22,
                        "weight": 0.7159945109806273
                },
                {
                        "source": 85,
                        "target": 78,
                        "weight": 0.7158090500610041
                },
                {
                        "source": 4,
                        "target": 11,
                        "weight": 0.7155449665092778
                },
                {
                        "source": 61,
                        "target": 62,
                        "weight": 0.7146962129041925
                },
                {
                        "source": 46,
                        "target": 34,
                        "weight": 0.7143813201624463
                },
                {
                        "source": 75,
                        "target": 74,
                        "weight": 0.7139807264543151
                },
                {
                        "source": 57,
                        "target": 62,
                        "weight": 0.7138840396178663
                },
                {
                        "source": 15,
                        "target": 16,
                        "weight": 0.713819469224603
                },
                {
                        "source": 79,
                        "target": 50,
                        "weight": 0.7136319789790067
                },
                {
                        "source": 14,
                        "target": 18,
                        "weight": 0.7135816357234426
                },
                {
                        "source": 80,
                        "target": 29,
                        "weight": 0.7133513464935477
                },
                {
                        "source": 74,
                        "target": 73,
                        "weight": 0.7133274797817808
                },
                {
                        "source": 86,
                        "target": 85,
                        "weight": 0.713282893610043
                },
                {
                        "source": 82,
                        "target": 83,
                        "weight": 0.7132404114565131
                },
                {
                        "source": 52,
                        "target": 61,
                        "weight": 0.7132350201204709
                },
                {
                        "source": 68,
                        "target": 59,
                        "weight": 0.7130473635341682
                },
                {
                        "source": 39,
                        "target": 46,
                        "weight": 0.7126204785708032
                },
                {
                        "source": 83,
                        "target": 77,
                        "weight": 0.712562778921737
                },
                {
                        "source": 31,
                        "target": 28,
                        "weight": 0.7124773638341374
                },
                {
                        "source": 82,
                        "target": 84,
                        "weight": 0.712160127166376
                },
                {
                        "source": 3,
                        "target": 41,
                        "weight": 0.7121340593943948
                },
                {
                        "source": 32,
                        "target": 74,
                        "weight": 0.7118617981184755
                },
                {
                        "source": 85,
                        "target": 77,
                        "weight": 0.7117702165393128
                },
                {
                        "source": 78,
                        "target": 55,
                        "weight": 0.7112886895120816
                },
                {
                        "source": 29,
                        "target": 32,
                        "weight": 0.710806313620771
                },
                {
                        "source": 12,
                        "target": 5,
                        "weight": 0.7104865235069914
                },
                {
                        "source": 79,
                        "target": 76,
                        "weight": 0.7103595905307128
                },
                {
                        "source": 48,
                        "target": 39,
                        "weight": 0.7102991008058399
                },
                {
                        "source": 10,
                        "target": 3,
                        "weight": 0.7102888446575474
                },
                {
                        "source": 81,
                        "target": 83,
                        "weight": 0.7099860728196938
                },
                {
                        "source": 46,
                        "target": 12,
                        "weight": 0.7095275965241713
                },
                {
                        "source": 26,
                        "target": 16,
                        "weight": 0.7092665715555202
                },
                {
                        "source": 84,
                        "target": 85,
                        "weight": 0.7089646480879148
                },
                {
                        "source": 81,
                        "target": 76,
                        "weight": 0.7088029711731412
                },
                {
                        "source": 68,
                        "target": 67,
                        "weight": 0.7087462744446316
                },
                {
                        "source": 58,
                        "target": 31,
                        "weight": 0.7081246687148831
                },
                {
                        "source": 60,
                        "target": 76,
                        "weight": 0.7080339513422647
                },
                {
                        "source": 26,
                        "target": 27,
                        "weight": 0.7076360910908454
                },
                {
                        "source": 43,
                        "target": 78,
                        "weight": 0.7074797501494886
                },
                {
                        "source": 50,
                        "target": 47,
                        "weight": 0.7073272198961116
                },
                {
                        "source": 20,
                        "target": 19,
                        "weight": 0.7071493928071027
                },
                {
                        "source": 2,
                        "target": 68,
                        "weight": 0.7071039440070076
                },
                {
                        "source": 74,
                        "target": 72,
                        "weight": 0.7070022760379298
                },
                {
                        "source": 3,
                        "target": 4,
                        "weight": 0.706998781712934
                },
                {
                        "source": 65,
                        "target": 68,
                        "weight": 0.7069588452290028
                },
                {
                        "source": 6,
                        "target": 4,
                        "weight": 0.706821232230419
                },
                {
                        "source": 57,
                        "target": 63,
                        "weight": 0.7067772332093931
                },
                {
                        "source": 87,
                        "target": 76,
                        "weight": 0.7064951386728842
                },
                {
                        "source": 54,
                        "target": 52,
                        "weight": 0.7064152849610944
                },
                {
                        "source": 36,
                        "target": 65,
                        "weight": 0.7059342620887646
                },
                {
                        "source": 22,
                        "target": 71,
                        "weight": 0.7057906804859063
                },
                {
                        "source": 80,
                        "target": 28,
                        "weight": 0.7048519580795276
                },
                {
                        "source": 74,
                        "target": 66,
                        "weight": 0.7047758152303867
                },
                {
                        "source": 35,
                        "target": 58,
                        "weight": 0.7042887619726114
                },
                {
                        "source": 53,
                        "target": 28,
                        "weight": 0.7041227163333448
                },
                {
                        "source": 10,
                        "target": 45,
                        "weight": 0.7033442256709737
                },
                {
                        "source": 28,
                        "target": 33,
                        "weight": 0.7026520207985728
                },
                {
                        "source": 65,
                        "target": 29,
                        "weight": 0.7026323622171071
                },
                {
                        "source": 41,
                        "target": 7,
                        "weight": 0.7024888558395237
                },
                {
                        "source": 58,
                        "target": 46,
                        "weight": 0.7022424997267559
                },
                {
                        "source": 46,
                        "target": 61,
                        "weight": 0.7021776874544067
                },
                {
                        "source": 13,
                        "target": 75,
                        "weight": 0.7018138400459224
                },
                {
                        "source": 78,
                        "target": 77,
                        "weight": 0.7018029089319968
                },
                {
                        "source": 84,
                        "target": 86,
                        "weight": 0.7015535998123996
                },
                {
                        "source": 33,
                        "target": 12,
                        "weight": 0.7011287091501277
                },
                {
                        "source": 47,
                        "target": 39,
                        "weight": 0.7009923423272613
                },
                {
                        "source": 86,
                        "target": 87,
                        "weight": 0.7005675007830051
                },
                {
                        "source": 80,
                        "target": 76,
                        "weight": 0.7003732810855687
                },
                {
                        "source": 79,
                        "target": 83,
                        "weight": 0.7001713586913988
                },
                {
                        "source": 74,
                        "target": 13,
                        "weight": 0.700095278409492
                }
        ],
        "metadata": {
                "total_nodes": 87,
                "total_edges": 282,
                "category": null
        }
};

        // Configuration
        const width = window.innerWidth;
        const height = window.innerHeight;

        // Color scale for categories
        const categories = [...new Set(graphData.nodes.map(n => n.category || 'uncategorized'))];
        const colorScale = d3.scaleOrdinal()
            .domain(categories)
            .range(d3.schemeTableau10);

        // Create legend
        const legendContainer = d3.select('#legend-items');
        categories.forEach(category => {
            const item = legendContainer.append('div')
                .attr('class', 'legend-item');
            
            item.append('div')
                .attr('class', 'legend-color')
                .style('background-color', colorScale(category));
            
            item.append('span')
                .text(category || 'uncategorized');
        });

        // Create SVG
        const svg = d3.select('#graph')
            .attr('width', width)
            .attr('height', height);

        // Create zoom behavior
        const zoom = d3.zoom()
            .scaleExtent([0.1, 10])
            .on('zoom', (event) => {
                container.attr('transform', event.transform);
            });

        svg.call(zoom);

        // Container for graph elements
        const container = svg.append('g');

        // Create force simulation
        const simulation = d3.forceSimulation(graphData.nodes)
            .force('link', d3.forceLink(graphData.edges)
                .id(d => d.id)
                .distance(d => 100 / (d.weight + 0.1))
                .strength(d => d.weight))
            .force('charge', d3.forceManyBody()
                .strength(-300)
                .distanceMax(400))
            .force('center', d3.forceCenter(width / 2, height / 2))
            .force('collision', d3.forceCollide().radius(30));

        // Create links
        const link = container.append('g')
            .selectAll('line')
            .data(graphData.edges)
            .join('line')
            .attr('class', 'link')
            .attr('stroke-width', d => Math.sqrt(d.weight) * 2);

        // Create nodes
        const node = container.append('g')
            .selectAll('circle')
            .data(graphData.nodes)
            .join('circle')
            .attr('class', 'node')
            .attr('r', d => {
                // Size based on number of connections
                const connections = graphData.edges.filter(e => 
                    e.source.id === d.id || e.target.id === d.id
                ).length;
                return 5 + Math.sqrt(connections) * 3;
            })
            .attr('fill', d => colorScale(d.category || 'uncategorized'))
            .attr('stroke', '#161b22')
            .attr('stroke-width', 2)
            .call(drag(simulation))
            .on('click', (event, d) => showNodeInfo(d))
            .on('mouseover', (event, d) => highlightNode(d))
            .on('mouseout', () => unhighlightAll());

        // Create labels (only for important nodes)
        const label = container.append('g')
            .selectAll('text')
            .data(graphData.nodes.filter(d => {
                const connections = graphData.edges.filter(e => 
                    e.source.id === d.id || e.target.id === d.id
                ).length;
                return connections > 2; // Only label well-connected nodes
            }))
            .join('text')
            .attr('class', 'node-label')
            .attr('dy', -15)
            .text(d => d.label.substring(0, 20) + (d.label.length > 20 ? '...' : ''));

        // Update positions on simulation tick
        simulation.on('tick', () => {
            link
                .attr('x1', d => d.source.x)
                .attr('y1', d => d.source.y)
                .attr('x2', d => d.target.x)
                .attr('y2', d => d.target.y);

            node
                .attr('cx', d => d.x)
                .attr('cy', d => d.y);

            label
                .attr('x', d => d.x)
                .attr('y', d => d.y);
        });

        // Drag behavior
        function drag(simulation) {
            function dragstarted(event) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                event.subject.fx = event.subject.x;
                event.subject.fy = event.subject.y;
            }

            function dragged(event) {
                event.subject.fx = event.x;
                event.subject.fy = event.y;
            }

            function dragended(event) {
                if (!event.active) simulation.alphaTarget(0);
                event.subject.fx = null;
                event.subject.fy = null;
            }

            return d3.drag()
                .on('start', dragstarted)
                .on('drag', dragged)
                .on('end', dragended);
        }

        // Highlight node and its connections
        function highlightNode(nodeData) {
            // Highlight connected links
            link.classed('highlighted', d => 
                d.source.id === nodeData.id || d.target.id === nodeData.id
            );

            // Highlight connected nodes
            const connectedIds = new Set();
            graphData.edges.forEach(e => {
                if (e.source.id === nodeData.id) connectedIds.add(e.target.id);
                if (e.target.id === nodeData.id) connectedIds.add(e.source.id);
            });

            node.style('opacity', d => 
                d.id === nodeData.id || connectedIds.has(d.id) ? 1 : 0.3
            );
        }

        // Remove highlights
        function unhighlightAll() {
            link.classed('highlighted', false);
            node.style('opacity', 1);
        }

        // Show node information panel
        function showNodeInfo(nodeData) {
            const panel = document.getElementById('info-panel');
            const content = document.getElementById('info-content');

            // Get connections
            const connections = graphData.edges
                .filter(e => e.source.id === nodeData.id || e.target.id === nodeData.id)
                .map(e => {
                    const otherId = e.source.id === nodeData.id ? e.target.id : e.source.id;
                    const otherNode = graphData.nodes.find(n => n.id === otherId);
                    return { node: otherNode, weight: e.weight };
                })
                .sort((a, b) => b.weight - a.weight);

            // Build HTML
            let html = `
                <h3>Memory #${nodeData.id}</h3>
                <div class="memory-text">${nodeData.label}</div>
                <div class="memory-meta">
                    <span class="tag">Category: ${nodeData.category || 'none'}</span>
                    <span class="tag">${connections.length} connections</span>
                </div>
            `;

            if (connections.length > 0) {
                html += '<div class="connections"><strong>Connected to:</strong>';
                connections.slice(0, 5).forEach(conn => {
                    html += `
                        <div class="connection-item">
                            <div style="color: #58a6ff; font-weight: 600;">
                                Similarity: ${(conn.weight * 100).toFixed(1)}%
                            </div>
                            <div style="margin-top: 4px;">
                                ${conn.node.label}
                            </div>
                        </div>
                    `;
                });
                if (connections.length > 5) {
                    html += `<div style="margin-top: 10px; color: #8b949e; font-size: 11px;">
                        ... and ${connections.length - 5} more
                    </div>`;
                }
                html += '</div>';
            }

            content.innerHTML = html;
            panel.classList.add('visible');

            // Highlight selected node
            node.classed('selected', d => d.id === nodeData.id);
        }

        // Close info panel
        function closeInfoPanel() {
            document.getElementById('info-panel').classList.remove('visible');
            node.classed('selected', false);
            unhighlightAll();
        }

        // Initial zoom to fit
        setTimeout(() => {
            const bounds = container.node().getBBox();
            const fullWidth = bounds.width;
            const fullHeight = bounds.height;
            const midX = bounds.x + fullWidth / 2;
            const midY = bounds.y + fullHeight / 2;

            const scale = 0.8 / Math.max(fullWidth / width, fullHeight / height);
            const translate = [width / 2 - scale * midX, height / 2 - scale * midY];

            svg.transition()
                .duration(750)
                .call(zoom.transform, d3.zoomIdentity
                    .translate(translate[0], translate[1])
                    .scale(scale));
        }, 100);
    </script>
</body>
</html>